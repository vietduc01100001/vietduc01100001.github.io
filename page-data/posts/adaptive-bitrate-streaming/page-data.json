{"componentChunkName":"component---src-templates-post-template-tsx","path":"/posts/adaptive-bitrate-streaming/","result":{"data":{"markdownRemark":{"id":"177036c9-e350-5905-b8dd-5ac54231d41d","html":"<p>If you watch a video on the Internet right now, chances are it’s being delivered to you by a technique called <em>adaptive bitrate streaming</em>. Adaptive bitrate streaming helps you experience uninterrupted playback, even on an old/low-performance device, or on a cellular network. No longer staring at the spinning screen. No longer having to download the video to watch offline. It’s just smooth!</p>\n<p>Over the past few weeks, I’ve been working on a project that requires some understanding of this technique. And here are some of my findings. Let’s get into it!</p>\n<h2 id=\"what-is-adaptive-bitrate-streaming\" style=\"position:relative;\"><a href=\"#what-is-adaptive-bitrate-streaming\" aria-label=\"what is adaptive bitrate streaming permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is adaptive bitrate streaming?</h2>\n<p>Adaptive bitrate streaming is a technique used in streaming multimedia. It works by detecting a user’s available resources, especially network bandwidth, to adjust the quality of the stream in real-time so that the user experience as smooth playback as possible.</p>\n<p>The easiest example is watching a YouTube video. Have you ever noticed when you start watching a video, the quality is usually 480p, and after a few seconds it switches to 720p or 1080p, then if you go too far from your wifi router, it switches back to 480p so you can keep watching without being interrupted? That’s adaptive bitrate streaming I’m talking about.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 407px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cda48dcaf7127860f02b1bf5b068fee4/0ff56/youtube.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 117.08333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEk0lEQVQ4y01U+1MaZxTd/8QZ2TcLgo+adCYVeVZ5KTZTHSedpk1ihEQBH4hgFNGViiiIqGwQAVFAUVEkTWsbTdC0ZtS2M+1Mf+gf07vYOD1zZ2d3ds8957vn+xa5OC1dnu1fne1/KH//9uTt8Q8np2/OOkxf0DQll8vvfXZPIBDgOI4R+C0Igqiqqprx+5Hjo62rcv76fen6olw+Ke/lC6Wj1yZTB0mSdXV1EmmNkKFFIkYMqIHiIZFIaJqOrEaR0l7mslz47RfQf5XP5l7GUrv7Rwa9EUUx+JYRCSUMJaYpmhEyIoYRVSAWkySxGIkgrw92r8rFP38tXZ5ubybiUS6RSm1rNJ+DskqpMhiN8sZ6ES4gaUoopIWMUMjwLcB5MBxGSsXih3eFvy4Or9/lEmtLK1wym93T6XSoABOLxEBgSJwmcIom6f+TSSIE5GKxdPbm4Pfzg/fH6XhsmVvb2tkvanVamItKpTa0tSvu3pEQOEERMMIKWXijHIosITs7+WKh8Kp4lMvmliLccjSRzuy1tGoFArTmZjwgRVEE6MPKhTApChbPk5fCSC67s7WZOT87/+nHEy6amF9Y5mLxFm0rhmEajcbY3qa40yjBMPIjE/rADQTHkw8OjxOJ1D9//3F1cbEW38hkCpvZvE5vQDGsIiwm4HOK/E9WSFcWT0HwwcUQUjz8mePWwXw8ucXF06nN3YPSsbHNhOE4KOv1eklNDQQDHOojv0LGZ+f9SCqZCwaXuJfpWCKX3tqLp7KZnT2DsQ3DcNgkJIkDE+ySPAjeNQBcEzj7HYv4/cGAPxhbyyTT+7H13Nx8OJ5Mgm2CIFtbtQ2fNEAqkBFFkSTYp0iCwAgSbOHeGQ8SjSY2NnbWU9tcLOObC3in3YlUTKfXC1BUKpVCMEAAwyTFK8MVBzLvGveyHiS5kd/MFpLp/MJi1Dlm9c2Obmyl+Gnj/LRBGRxSPI+4KZ5MQBTo5LQHWYtvrqzG54OhF+PDY+PWKdbJxVfVGjUcprq6WsiYqABaAIEvHMUr5AnvOBIMRefmwk5nv8PxLTszPsWOh5fnmxUyeK9UKmtrpSiG8m6Bi8PZxIAJjeBpzDOGDAz2ORz9ZnOnw9Hrcg+6XLZAgJXLm6qrq6VSiRBSITDyxvatBRwFjL5wIn3WhxbLlz09Jsuz7lG3lfVNhpdDSpVCIKiWyWQNDQ1AgHAoftx8E4JfMe9/2DmA2OyPR5z9vebuXnOXZ9K1EAqucFGVWgMS0tpakqLA/+0/BKsA+kINOmyI1fa43/oEri63fcbH+gOByEq0VauDnJQqVX19PQU7imFoOB38FqXBP4pVo5igx/wIcbmHx8acLMvO+v1zgQV/YGF62usYGbQP2h3OUduA3Wq3Dg3Z3QCPd8jp6uzq0Lfd/aan0+qwIE+f9potz5/32a22ISi4efCg+9GjrycmJsyWZxvptG14IOrzRZyjvoXFySl2xDls6mjusz152PMV0tKi0+qNBqPJyFeHVmeQyZqam2XwJ6qvb9BqtXKFor3jvt7Yfr+zy9Bm0rSoGz8VK9VNzcqmfwFSpOpeFrMRwgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/cda48dcaf7127860f02b1bf5b068fee4/8ac56/youtube.webp 240w,\n/static/cda48dcaf7127860f02b1bf5b068fee4/c9427/youtube.webp 407w\"\n              sizes=\"(max-width: 407px) 100vw, 407px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/cda48dcaf7127860f02b1bf5b068fee4/8ff5a/youtube.png 240w,\n/static/cda48dcaf7127860f02b1bf5b068fee4/0ff56/youtube.png 407w\"\n            sizes=\"(max-width: 407px) 100vw, 407px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/cda48dcaf7127860f02b1bf5b068fee4/0ff56/youtube.png\"\n            alt=\"YouTube\"\n            title=\"YouTube\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"how-does-it-work\" style=\"position:relative;\"><a href=\"#how-does-it-work\" aria-label=\"how does it work permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How does it work?</h2>\n<p>For this little magic to work out, we need some processing at both the server and the client.</p>\n<p>When a media file is uploaded, it is encoded into multiple versions of itself at different bit rates (for videos, usually at different resolutions too). These versions then get chunked into small segments. The size of these segments depends on the implementations but is typically between 2 and 10 seconds.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec02208f5dd9590b1f5eb6f80bf238be/e2310/how-it-works-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.08333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1klEQVQoz5WS2wqDMBBE/f+vDOiLGoxoveRme8hSkZJInQdZ1pmdvaR6l3Ech3PuldB1nTFGa933vfdeJ1Q3YkholFLrumYJ1Y0tmnmescVfMoIzLopDCP6LGONfziGBwFpLsCxL27b7vufFNDaOo9T2FyBGyXqaptm2LS/mN3uDx2AMaRMIyOOMJ3lq5cXwIFEbEiUIEJAchoE8haZpkoVlxNKk7BA2PARMwZc948+pim3/nOc8hizseqoHd5aekWEr+3/8SDhEXdePXxhgcnnMtJAlfAAMUv4JQmp5jQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ec02208f5dd9590b1f5eb6f80bf238be/8ac56/how-it-works-1.webp 240w,\n/static/ec02208f5dd9590b1f5eb6f80bf238be/d3be9/how-it-works-1.webp 480w,\n/static/ec02208f5dd9590b1f5eb6f80bf238be/e46b2/how-it-works-1.webp 960w,\n/static/ec02208f5dd9590b1f5eb6f80bf238be/61c9b/how-it-works-1.webp 968w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ec02208f5dd9590b1f5eb6f80bf238be/8ff5a/how-it-works-1.png 240w,\n/static/ec02208f5dd9590b1f5eb6f80bf238be/e85cb/how-it-works-1.png 480w,\n/static/ec02208f5dd9590b1f5eb6f80bf238be/d9199/how-it-works-1.png 960w,\n/static/ec02208f5dd9590b1f5eb6f80bf238be/e2310/how-it-works-1.png 968w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ec02208f5dd9590b1f5eb6f80bf238be/d9199/how-it-works-1.png\"\n            alt=\"How it works 1\"\n            title=\"How it works 1\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>When a user plays a video, the player client requests the server and receives a manifest file, which tells the player client how many segments this video has and where to find them. The segments are served over HTTP.</p>\n<p>Now the player client runs an algorithm to analyze the device resource metrics, including network speed, network bandwidth, and CPU capacity. It then chooses the segments with the suitable quality to start playing, while continues to run the algorithm in real-time and makes changes adaptively to the available resources.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 827px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/19468cc961e63a30a89ecc12d8a46928/4e6ec/how-it-works-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABR0lEQVQ4y5WTyXKDMBBE+f/vyim35Aq+QJl9321QklcMllTYcdldZVnq0WhaPcLJsiyO46qqhmH4fQFfvfpslcydpmnKsuz7fpome9PPDYbZxu/m8lHMsnSUUuu6HvY9QTeMaVXvyfwhmLKXG67Xa9u2yKnruiiKcRxhdJSdFNtl84NirSwsyzLPsxx0CAljktl6L4+CeHnvohxhkimCmNkCNck8n89hGDLXPGWwFsYko0TdQfynsk2ypDuEmHDQv7KlWwcGF6MoStMURdj52DAgbh1EoRwvUCShvVVQ9p0J06Q8zyll8yToVu3J2vpXoN0+3lneGTE92ozsWTeYyqKTBe1xXTdJkiAIPM9DM0/tdDr5vq/vBcNokrUrHCnzZYN+bWInxemTGNF1HfWeterBV9F12Qap/16yGCb66dHbyVyB/eLiH7fcIEFbpp7MAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/19468cc961e63a30a89ecc12d8a46928/8ac56/how-it-works-2.webp 240w,\n/static/19468cc961e63a30a89ecc12d8a46928/d3be9/how-it-works-2.webp 480w,\n/static/19468cc961e63a30a89ecc12d8a46928/97d4f/how-it-works-2.webp 827w\"\n              sizes=\"(max-width: 827px) 100vw, 827px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/19468cc961e63a30a89ecc12d8a46928/8ff5a/how-it-works-2.png 240w,\n/static/19468cc961e63a30a89ecc12d8a46928/e85cb/how-it-works-2.png 480w,\n/static/19468cc961e63a30a89ecc12d8a46928/4e6ec/how-it-works-2.png 827w\"\n            sizes=\"(max-width: 827px) 100vw, 827px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/19468cc961e63a30a89ecc12d8a46928/4e6ec/how-it-works-2.png\"\n            alt=\"How it works 2\"\n            title=\"How it works 2\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>The result is we have a very self-aware guy who can analyze stuff and pick the right work to do, all to give us — the end-users — the best experience possible.</p>\n<h2 id=\"pros-and-cons\" style=\"position:relative;\"><a href=\"#pros-and-cons\" aria-label=\"pros and cons permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pros and cons</h2>\n<p>Compared to traditional multimedia streaming, back when the user has to download the media stream in the original quality and struggles when network speed is limited, adaptive bitrate streaming brings a lot of advantages, both for users and developers:</p>\n<ul>\n<li>Smooth playback in various network conditions.</li>\n<li>Serving over HTTP, widely compatible and secured.</li>\n<li>Can make use of our CDNs to cache media segments. This is a huge deal.</li>\n<li>Less development cost to develop and maintain servers that use other streaming protocols like <a href=\"https://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RTSP</a>.</li>\n</ul>\n<p>The seemingly only con when using adaptive bitrate streaming is more storage cost, as we have to store multiple copies of a media file source. However, with all the good stuff we’re getting from it, adaptive bitrate streaming is a great technique that benefits everyone.</p>\n<h2 id=\"whats-more\" style=\"position:relative;\"><a href=\"#whats-more\" aria-label=\"whats more permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What’s more?</h2>\n<p>There are numerous well-known implementations like <a href=\"https://en.wikipedia.org/wiki/Dynamic_Adaptive_Streaming_over_HTTP\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">MPEG-DASH</a> or <a href=\"https://en.wikipedia.org/wiki/HTTP_Live_Streaming\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">HLS</a>, which you can read more about. There is <a href=\"https://youtube-eng.googleblog.com/2018/04/making-high-quality-video-efficient.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">this</a> blog post by YouTube on how they’re doing adaptive video streaming. You can also take a look at <a href=\"https://en.wikipedia.org/wiki/Real-time_Transport_Protocol\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RTP</a>, which is a protocol that’s used in multimedia streaming. Have fun reading!</p>","fields":{"slug":"/posts/adaptive-bitrate-streaming/","seriesSlug":null,"tagSlugs":["/tag/media/","/tag/streaming/"]},"frontmatter":{"date":"2021-03-07T04:30:00.000Z","description":"What is adaptive bitrate streaming? How does it work? And what benefits does it offer?","tags":["media","streaming"],"title":"Adaptive bitrate streaming","series":null,"socialImage":{"publicURL":"/static/80c722cfbd3b732d4b1dffe8019f83ee/thumb.png"}}}},"pageContext":{"slug":"/posts/adaptive-bitrate-streaming/"}},"staticQueryHashes":["251939775","2803610385","323858932"]}